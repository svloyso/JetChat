@import play.api.libs.json.JsValue

@(
    user: User,
    stateId: String,
    groupId: Option[Long],
    topicId: Option[Long],
    userId: Option[Long],
    userTopicId: Option[Long],
    integrationId: Option[String],
    integrationGroupId: Option[String],
    integrationTopicGroupId: Option[String],
    integrationTopicId: Option[String],
    webSocketUrl: String)

@head = {
    <link rel="stylesheet" href="@routes.Assets.at("stylesheets/index.css")"/>

    <script>
        var _global = {
            user: { id: @{user.id}, name: "@{user.name}", avatar: "@{user.avatar}" },
            stateId: @{Html("\"" + stateId + "\"")},
            selectedGroupId: @{groupId match { case Some(id) => id case None => Html("undefined") } },
            selectedUserTopicId: @{userTopicId match { case Some(id) => id case None => Html("undefined") } },
            selectedUserId: @{userId match { case Some(id) => id case None => Html("undefined") } },
            selectedIntegrationId: @{ integrationId match { case Some(id) => Html("\"" + id + "\"") case None => Html("undefined") }},
            selectedIntegrationGroupId: @{integrationGroupId match { case Some(id) => Html("\"" + id + "\"") case None => Html("undefined") } },
            webSocketUrl: "@Html(webSocketUrl)",
            selectedTopicId: @{topicId match { case Some(id) => id case None => Html("undefined") } },
            selectedIntegrationTopicGroupId: @{integrationTopicGroupId match { case Some(id) => Html("\"" + id + "\"") case None => Html("undefined") } },
            selectedIntegrationTopicId: @{integrationTopicId match { case Some(id) => Html("\"" + id + "\"") case None => Html("undefined") } }
        };
    </script>
    <script src="@routes.Assets.at("javascripts/webpack/main.js")"></script>
}

@main("JetChat", head) {
    <div id="app"></div>
}
