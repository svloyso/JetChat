@import play.api.libs.json.JsValue

@(user: User, users: JsValue, groups: JsValue, webSocketUrl: String,
        selectedGroupId: Option[Long], selectedTopic: Option[JsValue], selectedUserId: Option[Long])

@head = {
    <link rel="stylesheet" href="@routes.Assets.at("stylesheets/index.css")"/>

    <script src="@routes.Assets.at("javascripts/react-with-addons.js")"></script>
    <script src="@routes.Assets.at("javascripts/JSXTransformer.js")"></script>
    <script src="@routes.Assets.at("javascripts/jquery-dateFormat.min.js")"></script>
    <script src="@routes.Assets.at("javascripts/reflux.js")"></script>
    <script src="@routes.Assets.at("javascripts/react-autolink.js")"></script>
    <script src="@routes.Assets.at("javascripts/react-emoji.js")"></script>
    <script type="text/jsx" src="@routes.Assets.at("javascripts/index.js")"></script>
    <script>
        var global = {
            user: {
                id: @{user.id},
                name: "@{user.name}",
                avatar: "@{user.avatar}"
            },
            webSocketUrl: "@Html(webSocketUrl)",
            users: @{Html(users.toString)},
            groups: @{Html(groups.toString)},
            selectedGroupId: @{selectedGroupId match {
				case Some(id) => id
				case None => Html("undefined")
			}},
			selectedTopic: @{selectedTopic match {
				case Some(value) => Html(value.toString())
				case None => Html("undefined")
			}},
			selectedUserId: @{selectedUserId match {
				case Some(id) => id
				case None => Html("undefined")
			}}
        }
    </script>
}

@main("JetChat", head) {
    <div id="app"></div>
}
